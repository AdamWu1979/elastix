\documentclass[a4paper]{article}

%\usepackage[]{graphicx}
%\usepackage{eqnarray}
%\usepackage{amsfonts}
%\usepackage{amsmath}
%\usepackage{amssymb}
%\usepackage{psfrag}
%
%\usepackage{subfigure}
%\usepackage{epsfig}

% Set the page geometry
\setlength\textwidth{16cm}
\addtolength\evensidemargin{-2cm}
\addtolength\oddsidemargin{-2cm}

% Change some environments
\renewcommand\descriptionlabel[1]{\textbf{#1: }}
\newenvironment{Tabular}[1]{\ttfamily \begin{tabular}{#1}}{\end{tabular}}

\title{parameter-file and command line options}

\author{Stefan Klein and Marius Staring}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%>>>> uncomment following for page numbers
% \pagestyle{plain}
%>>>> uncomment following to start page numbering at 301
%\setcounter{page}{301}

\begin{document}
\maketitle

Define parameter-file as a file containing all information \texttt{elastix} needs to perform a
registration. Define transform-parameter-file as a file containing all information about some
tranform, especially the transform parameters. The latter file is needed for applying the
specified transform to some image using \texttt{transformix}

\section{command line options}

\textbf{elastix}

\texttt{elastix} is registration

\begin{Tabular}{lll}
\rmfamily option & \rmfamily description & \rmfamily example \\
\hline
-f*      &   fixed image             &   /data/fixed.mhd \\
-m*      &   moving image            &   /data/moving.mhd \\
-fMask  &   mask for fixed image    &   /data/fixedmask.mhd \\
-mMask  &   mask for moving image   &   /data/movingmask.mhd \\
-out*    &   output directory        &   /results/ \\
-p*      &   parameter file          &   /results/param.txt \\
-t0     &   initial transform       &   /results/transformparameters.txt \\
-priority & Set the process priority & high \\
            & to high (Windows only) &
\end{Tabular}

Options marked with a * are mandatory. The option -p may occur more than once. registration is
performed with each parameter file in succession.

\textbf{transformix}

\texttt{transformix} is for applying transforms to images or for calculating transformed input
points

\begin{Tabular}{lll}
\rmfamily option & \rmfamily description & \rmfamily example \\
\hline
-out*    &  output directory    &   /results/ \\
-tp*     &  transform-parameter-file      &   /results/transformparam.txt \\
-ipp     &  file containing input points   &   /results/ipp.txt \\
-in      &  input image to deform       &   /results/input.mhd \\
-ipt    &   input pixel type    &   short \\
-opt    &   output pixel type   &   short \\
-priority & Set the process priority & high \\
            & to high (Windows only) &
\end{Tabular}

Use '\texttt{-ipp all}' to tranform all points from the input image. use -ipt and -opt only if it
is different from the pixel type specified in the transform-parameter-file.

\section{parameter-file options}

\begin{description}
\item[General options] bla\\
    \begin{Tabular}{l}
    (FixedImagePixelType "type") \\
    (FixedImageDimension dimension) \\
    (MovingImagePixelType "type") \\
    (MovingImageDimension dimension) \\
    (WriteTransformParametersEachIteration "string1"~\ldots~"stringN") \\
    (DefaultOutputPrecision uint)
    \end{Tabular}\\
where \texttt{type} is from \{ \texttt{short, etc.} \}, \texttt{dimension} from $\{2,3\}$,
\texttt{string} from \{ \texttt{true, false} \} for each resolution and \texttt{uint} a positive
integer.

\item[Components] list the components needed for registration\\\vspace{-5mm}
    \begin{itemize}
    \item Registration type, choose one of\\
        \begin{Tabular}{l}
        (Registration "MultiResolutionRegistration")
        \end{Tabular}
    \item Fixed image pyramid type, choose one of\\
        \begin{Tabular}{l}
        (FixedImagePyramid "FixedRecursiveImagePyramid")
        \end{Tabular}
    \item Moving image pyramid type, choose one of\\
        \begin{Tabular}{l}
        (MovingImagePyramid "MovingRecursiveImagePyramid")
        \end{Tabular}
    \item Interpolator type, choose one of\\
        \begin{Tabular}{l}
        (Interpolator "BSplineInterpolator")
        \end{Tabular}
    \item Image similarity metric type, choose one of\\
        \begin{Tabular}{l}
        (Metric "MattesMutualInformation") \\
        (Metric "MutualInformationHistogram") \\
        (Metric "NormalizedCorrelation") \\
        (Metric "ViolaWellsMutualInformation")
        \end{Tabular}
    \item Optimiser type, choose one of\\
        \begin{Tabular}{l}
        (Optimizer "FiniteDifferenceGradientDescent") \\
        (Optimizer "FullSearch") \\
        (Optimizer "RegularStepGradientDescent") \\
        (Optimizer "RSGDEachParameterApart") \\
        (Optimizer "SimultaneousPerturbation") \\
        (Optimizer "StandardGradientDescent")
        \end{Tabular}
    \item Resample interpolator type, choose one of\\
        \begin{Tabular}{l}
        (ResampleInterpolator "FinalBSplineInterpolator")
        \end{Tabular}
    \item Resampler type, choose one of\\
        \begin{Tabular}{l}
        (Resampler "DefaultResampler")
        \end{Tabular}
    \item Transform type, choose one of\\
        \begin{Tabular}{l}
        (Transform "BSplineTransform") \\
        (Transform "BSplineTransformWithDiffusion") \\
        (Transform "DeformationFieldTransform") \\
        (Transform "EulerTransform") \\
        (Transform "FixedCenterOfRotationAffineTransform") \\
        (Transform "TranslationTransform")
        \end{Tabular}
    \end{itemize}

\item[Multiresolution] specific\\
    \begin{Tabular}{l}
    (NumberOfResolutions uint) \\
    (FixedPyramidSchedule uint1~\ldots~uintM) \\
    (MovingPyramidSchedule uint1~\ldots~uintM)
    \end{Tabular}\\
where \texttt{uint} a positive integer. See ITK website for setting the schedules.

\item[Optimiser] specific, general options for all optimisers\\
    \begin{Tabular}{l}
    (UseExactMetricDerivative "string") \\
    (ShowExactMetricValue "string") \\
    (SmartSampleSelect "string") \\
    (MaximumNumberOfIterations uint1~\ldots~uintN) \\
    (NewSamplesEveryIteration "string1"~\ldots~"stringN") \\
    (NumberOfSpatialSamples uint1~\ldots~uintN)
    \end{Tabular}\\
where \texttt{string} from \{ \texttt{true, false} \} and \texttt{uint} a positive
integer for each resolution.\\
Options specific for specific optimisers
    \begin{itemize}
    \item FiniteDifferenceGradientDescent, SimultaneousPerturbation, StandardGradientDescent\\
        \begin{Tabular}{l}
        (SP\_a float1~\ldots~floatN) \\
        (SP\_alpha float1~\ldots~floatN) \\
        (SP\_A float1~\ldots~floatN)
        \end{Tabular}\\
    where \texttt{float} a positive float for each resolution.
    \item FullSearch\\
        \begin{Tabular}{l}
        (FullSearchSpace ???)
        \end{Tabular}\\
    where ?????.
    \item RegularStepGradientDescent, RSGDEachParameterApart\\
        \begin{Tabular}{l}
        (MinimumGradientMagnitude float1\ldots floatn) \\
        (MaximumStepLength float1\ldots floatn) \\
        (MinimumStepLength float1\ldots floatn)
        \end{Tabular}\\
    where \texttt{float} a positive float for each resolution.
    \item FiniteDifferenceGradientDescent????, SimultaneousPerturbation\\
        \begin{Tabular}{l}
        (SP\_c float1~\ldots~floatN) \\
        (SP\_gamma float1~\ldots~floatN)
        \end{Tabular}\\
    where \texttt{float} a positive float for each resolution.
    \end{itemize}

\item[Transform] specific, general options for all transforms\\
    \begin{Tabular}{l}
    (NumberOfParameters uint) \\
    (TransformParameters float1~\ldots~floatL) \\
    (HowToCombineTransforms "string1")??? \\
    (InitialTransformParametersFileName "string2")??? \\
    \end{Tabular}\\
where \texttt{uint} a positive integer, \texttt{float} a float for each parameter,
\texttt{string1} from \{ \texttt{Add, Concatenate, ???} \} and \texttt{string2} a filename.\\
Options specific for specific transforms
    \begin{itemize}
    \item BSplineTransform, BSplineTransformWithDiffusion\\
        \begin{Tabular}{l}
        (FinalGridSpacing 64.0) \\
        (UpsampleGridOption "false") \\
        (GridSize float1\ldots floatn) \\
        (GridIndex float1\ldots floatn) \\
        (GridSpacing float1\ldots floatn) \\
        (GridOrigin float1\ldots floatn) \\
        \end{Tabular}\\
    where \texttt{nr} a positive integer.
    \item BSplineTransformWithDiffusion\\
        \begin{Tabular}{l}
        (Radius nr) \\
        (NumberOfDiffusionIterations nr) \\
        (DiffusionEachNIterations nr) \\
        (ThresholdBool "string") \\
        %(Threshold float) \\
        (ThresholdHU int) \\
        (WriteDiffusionFiles "string") \\
        (FilterPattern nrr) \\
        (AfterIterations nr1 nr2) \\
        (HowManyIterations nr1 nr2 nr3) \\
        (GrayValueImageAlsoBasedOnFixedImage "string") \\
        (DeformationFieldFileName "stringg") ???
        \end{Tabular}\\
    where \texttt{nr} a positive integer.nrr = 1,2
    \item DeformationFieldTransform\\
        \begin{Tabular}{l}
        (DeformationFieldFileName "stringg") ???\\
        (InitialTransformParametersFileName "stringg")??? \\
        (HowToCombineTransforms "stringggg")???
        \end{Tabular}\\
    where \texttt{nr} a positive integer.nrr = 1,2
    \item EulerTransform\\
        \begin{Tabular}{l}
        (Scaler double)
        \end{Tabular}\\
    where \texttt{double} a positive double
    \item FixedCenterOfRotationAffineTransform\\
        \begin{Tabular}{l}
        (Scaler double) \\
        (CenterOfRotation uint1\ldots uintn) \\
        (Size )??? \\
        (Index )??? \\
        (Spacing )??? \\
        (Origin )??? \\
        \end{Tabular}\\
    where \texttt{double} a positive double
    \end{itemize}

\item[Metric] specific, options specific for specific transforms\\
    \begin{itemize}
    \item MattesMutualInformation\\
        \begin{Tabular}{l}
        (NumberOfHistogramBins unint) \\
        (NumberOfSpatialSamples unint) \\
        (NewSamplesEveryIteration "string") \\
        (ShowMetricValue "string")
        \end{Tabular}\\
    where \texttt{nr} a positive integer. where \texttt{string} in \{ \texttt{true, false} \}.
    \item ViolaWellsMutualInformation\\
        \begin{Tabular}{l}
        (NumberOfSpatialSamples unint) \\
        (FixedImageStandardDeviation double) \\
        (MovingImageStandardDeviation double)
        \end{Tabular}\\
    where \texttt{nr} a po
    \end{itemize}

\item[Interpolator] specific\\
    \begin{Tabular}{l}
    (BSplineInterpolationOrder 1)
    \end{Tabular}\\
where \texttt{nr} a positive integer.

\item[Resampler] specific\\
    \begin{Tabular}{l}
    (DefaultPixelValue -1000) \\
    (Size )??? \\
    (Index )??? \\
    (Spacing )??? \\
    (Origin )??? \\
    \end{Tabular}\\
where \texttt{nr} a positive integer.
    \begin{itemize}
    \item FinalBSplineInterpolator\\
        \begin{Tabular}{l}
        (FinalBSplineInterpolationOrder 3) \\
        \end{Tabular}\\
    where \texttt{nr} a positive integer. where \texttt{string} in \{ \texttt{true, false} \}.
    \end{itemize}

\end{description}

\end{document}
